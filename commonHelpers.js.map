{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createMurkup = function (objArr) {\n  return objArr\n    .map(\n      ({\n        views,\n        comments,\n        downloads,\n        likes,\n        webformatURL,\n        tags,\n        largeImageURL,\n      }) => {\n        return `<li>\n        <div class=\"img-box\">\n        <a href=\"${largeImageURL}\">\n        <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\">\n        </a>\n        <ul class=\"value-list\">\n        <li class=\"likes value-item\"><p class=\"article\">Likes</p><p class=\"value\">${likes}</p></li>\n        <li class=\"views value-item\" ><p class=\"article\">Views</p><p class=\"value\">${views}</p></li>\n        <li class=\"comments value-item\"><p class=\"article\">Comments</p><p class=\"value\">${comments}</p></li>\n        <li class=\"downloads value-item\"><p class=\"article\">Downloads</p><p class=\"value\">${downloads}</p></li>\n        </ul></div>\n        </li>`;\n      }\n    )\n    .join('');\n};\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '43500562-b59296b97b4360198cb07a703';\n\nexport async function searchObject(searchName, page) {\n  const { data } = await axios(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: searchName,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n  return data;\n}\n","import { createMurkup } from './js/render-functions.js';\nimport { searchObject } from './js/pixabay-api.js';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport simpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst search = document.querySelector('input');\nconst objectList = document.querySelector('.object-list');\nconst loader = document.querySelector('.loader-box');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst lightboxGallery = new simpleLightbox('.gallery a', {\n  caption: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  showCounter: false,\n});\n\nsearchForm.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMore);\n\nlet page = 1;\nlet pageLimit;\nlet searchValue;\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  if (!search.value) {\n    return iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: 'red',\n      closeOnClick: true,\n      position: 'topCenter',\n    });\n  }\n\n  objectList.textContent = '';\n  loader.style.display = 'flex';\n  searchValue = event.currentTarget.elements.search.value.trim();\n  page = 1;\n\n  searchObject(searchValue, page)\n    .then(data => {\n      if (!data.total) {\n        loader.style.display = 'none';\n        loadMoreBtn.style.display = 'none';\n\n        return iziToast.info({\n          message: \"Don't found\",\n          closeOnClick: true,\n          position: 'topCenter',\n        });\n      }\n\n      updateMurkup(data.hits);\n      event.target.reset();\n      loader.style.display = 'none';\n      loadMoreBtn.style.display = 'block';\n      lastPage(data);\n    })\n    .catch(error => {\n      loader.style.display = 'none';\n      return iziToast.error({\n        message: `${error.message}`,\n        backgroundColor: 'red',\n        position: 'topCenter',\n      });\n    });\n}\n\nasync function loadMore() {\n  loader.style.display = 'flex';\n  page = page + 1;\n\n  await searchObject(searchValue, page)\n    .then(data => {\n      updateMurkup(data.hits);\n\n      const liElement = document.querySelector('li');\n      const { height } = liElement.getBoundingClientRect();\n      scrollVertical(height * 2, 0);\n\n      loader.style.display = 'none';\n\n      pageLimit = Math.floor(data.totalHits / 15);\n\n      if (page >= pageLimit) {\n        lastPage(data);\n        iziToast.show({\n          titleColor: 'white',\n          message: `We're sorry, but you've reached the end of search results!`,\n          messageColor: 'black',\n          color: 'blue',\n          position: 'topCenter',\n          timeout: '5000',\n        });\n      }\n    })\n    .catch(error => {\n      loader.style.display = 'none';\n      return iziToast.error({\n        message: `${error.message}`,\n        backgroundColor: 'red',\n        position: 'topCenter',\n      });\n    });\n}\n\nfunction updateMurkup(hits) {\n  objectList.insertAdjacentHTML('beforeend', createMurkup(hits));\n  lightboxGallery.refresh();\n}\n\nfunction scrollVertical(x = 0, y = 0) {\n  window.scrollBy({ top: x, left: y, behavior: 'smooth' });\n}\n\nfunction lastPage(data) {\n  const resOfImages = Math.round(data.totalHits / page);\n  if (resOfImages <= 15) {\n    loadMoreBtn.style.display = 'none';\n  }\n}\n"],"names":["createMurkup","objArr","views","comments","downloads","likes","webformatURL","tags","largeImageURL","BASE_URL","API_KEY","searchObject","searchName","page","data","axios","searchForm","search","objectList","loader","loadMoreBtn","lightboxGallery","simpleLightbox","handleSubmit","loadMore","pageLimit","searchValue","event","iziToast","updateMurkup","lastPage","error","liElement","height","scrollVertical","hits","x","y"],"mappings":"owBAAO,MAAMA,EAAe,SAAUC,EAAQ,CAC5C,OAAOA,EACJ,IACC,CAAC,CACC,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,MAAAC,EACA,aAAAC,EACA,KAAAC,EACA,cAAAC,CACR,IACe;AAAA;AAAA,mBAEIA,CAAa;AAAA,gCACAF,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,oFAG0BF,CAAK;AAAA,qFACJH,CAAK;AAAA,0FACAC,CAAQ;AAAA,4FACNC,CAAS;AAAA;AAAA,cAIhG,EACA,KAAK,EAAE,CACZ,ECzBMK,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAaC,EAAYC,EAAM,CACnD,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,GAAGN,CAAQ,GAAI,CAC1C,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACL,CAAG,EACD,OAAOC,CACT,CCNA,MAAME,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAkB,IAAIC,EAAe,aAAc,CACvD,QAAS,GACT,aAAc,MACd,aAAc,IACd,YAAa,EACf,CAAC,EAEDN,EAAW,iBAAiB,SAAUO,CAAY,EAClDH,EAAY,iBAAiB,QAASI,CAAQ,EAE9C,IAAIX,EAAO,EACPY,EACAC,EAEJ,SAASH,EAAaI,EAAO,CAG3B,GAFAA,EAAM,eAAc,EAEhB,CAACV,EAAO,MACV,OAAOW,EAAS,MAAM,CACpB,QACE,2EACF,gBAAiB,MACjB,aAAc,GACd,SAAU,WAChB,CAAK,EAGHV,EAAW,YAAc,GACzBC,EAAO,MAAM,QAAU,OACvBO,EAAcC,EAAM,cAAc,SAAS,OAAO,MAAM,OACxDd,EAAO,EAEPF,EAAae,EAAab,CAAI,EAC3B,KAAKC,GAAQ,CACZ,GAAI,CAACA,EAAK,MACR,OAAAK,EAAO,MAAM,QAAU,OACvBC,EAAY,MAAM,QAAU,OAErBQ,EAAS,KAAK,CACnB,QAAS,cACT,aAAc,GACd,SAAU,WACpB,CAAS,EAGHC,EAAaf,EAAK,IAAI,EACtBa,EAAM,OAAO,QACbR,EAAO,MAAM,QAAU,OACvBC,EAAY,MAAM,QAAU,QAC5BU,EAAShB,CAAI,CACnB,CAAK,EACA,MAAMiB,IACLZ,EAAO,MAAM,QAAU,OAChBS,EAAS,MAAM,CACpB,QAAS,GAAGG,EAAM,OAAO,GACzB,gBAAiB,MACjB,SAAU,WAClB,CAAO,EACF,CACL,CAEA,eAAeP,GAAW,CACxBL,EAAO,MAAM,QAAU,OACvBN,EAAOA,EAAO,EAEd,MAAMF,EAAae,EAAab,CAAI,EACjC,KAAKC,GAAQ,CACZe,EAAaf,EAAK,IAAI,EAEtB,MAAMkB,EAAY,SAAS,cAAc,IAAI,EACvC,CAAE,OAAAC,CAAM,EAAKD,EAAU,sBAAqB,EAClDE,EAAeD,EAAS,EAAG,CAAC,EAE5Bd,EAAO,MAAM,QAAU,OAEvBM,EAAY,KAAK,MAAMX,EAAK,UAAY,EAAE,EAEtCD,GAAQY,IACVK,EAAShB,CAAI,EACbc,EAAS,KAAK,CACZ,WAAY,QACZ,QAAS,6DACT,aAAc,QACd,MAAO,OACP,SAAU,YACV,QAAS,MACnB,CAAS,EAET,CAAK,EACA,MAAMG,IACLZ,EAAO,MAAM,QAAU,OAChBS,EAAS,MAAM,CACpB,QAAS,GAAGG,EAAM,OAAO,GACzB,gBAAiB,MACjB,SAAU,WAClB,CAAO,EACF,CACL,CAEA,SAASF,EAAaM,EAAM,CAC1BjB,EAAW,mBAAmB,YAAalB,EAAamC,CAAI,CAAC,EAC7Dd,EAAgB,QAAO,CACzB,CAEA,SAASa,EAAeE,EAAI,EAAGC,EAAI,EAAG,CACpC,OAAO,SAAS,CAAE,IAAKD,EAAG,KAAMC,EAAG,SAAU,QAAQ,CAAE,CACzD,CAEA,SAASP,EAAShB,EAAM,CACF,KAAK,MAAMA,EAAK,UAAYD,CAAI,GACjC,KACjBO,EAAY,MAAM,QAAU,OAEhC"}